<oj-sp-welcome-page id="oj-sp-wp1" illustration-background="[[ require.toUrl($page.variables.illustrationBackground) ]]"
  illustration-foreground="[[ require.toUrl($page.variables.illustrationForeground) ]]"
  display-options.image-stretch="[[ $page.variables.imageStretch ]]"
  display-options.mobile-image="[[ $page.variables.mobileImage ]]" display-options.responsive-padding="on"
  page-title="Crew Combination Time Entry" background-color="dark-pebble">



  <div class="oj-flex" style="margin:10px">
    <div class="oj-flex-item oj-sm-9">
      <oj-form-layout max-columns=" 3" label-edge="top" columns="3">
      <oj-select-single label-hint="Crew Name" value="{{ $variables.headerobj.crewname }}" item-text="crew_name"
        required="true" data="[[$variables.getGetCustomerDetailsListSDP]]"
        on-value-item-changed="[[$listeners.selectValueItem2]]"></oj-select-single>
      <oj-input-date label-hint="Crew Date" value="{{ $variables.headerobj.crewDate }}" required="true">
      </oj-input-date>

      <div>
      <oj-button label="Search" style="margin-top:20px" chroming="callToAction" class="oj-button-sm"
        on-oj-action="[[$listeners.buttonAction3]]">
        <span class="oj-ux-ico-search" slot="startIcon"></span>
      </oj-button>
      </div>

      </oj-form-layout>
    </div>
    <div class="oj-flex-item oj-sm-3" style="text-align:right;">
      <oj-button label="Add Column" chroming="callToAction" class="oj-button-sm" on-oj-action="[[$listeners.buttonAction]]">
        <span slot="startIcon" class="oj-ux-ico-plus"></span>
      </oj-button>
      <oj-button label="save" chroming="callToAction" class="oj-button-sm" on-oj-action="[[$listeners.buttonAction2]]">
        <span slot="startIcon" class="oj-ux-ico-save"></span>
      </oj-button>
       <oj-button label="Submit" chroming="callToAction" class="oj-button-sm"
         on-oj-action="[[$listeners.buttonAction4]]">
        <span slot="startIcon" class="oj-ux-ico-save"></span>
      </oj-button>
    </div>
  </div>

  <div class="oj-flex" style="margin:10px">
    <div class="oj-flex-item oj-sm-12">
      <oj-table scroll-policy="loadMoreOnScroll" style="width:100%" columns="[[$variables.dynamicCols]]"
        columns-default.sortable="disabled" data="[[ $variables.dynamicADP ]]" horizontal-grid-visible="enabled"
       >
        <template slot="common" data-oj-as="cell">
          <oj-bind-if test="[[$current.row.tname==='Projects']]">
            <oj-select-single data="[[ $variables.projectADP ]]" item-text="project_name"
              value="{{ $variables.combinationValues[$functions.getColumnName($current)] }}"
              on-value-item-changed="[[$listeners.selectValueItem]]"></oj-select-single>
          </oj-bind-if>
           <oj-bind-if test="[[$current.row.tname === 'Task']]">
            <oj-select-single value="{{ $variables.combinationValues[$functions.getColumnName($current)] }}"
              item-text="TaskName" data="[[ $variables.taskDPMap[$functions.getColumnName($current)] ]]"
              on-value-item-changed="[[$listeners.selectValueItem3]]"
              >
            </oj-select-single>
          </oj-bind-if>


          <oj-bind-if test="[[$current.row.tname !== 'Projects' && $current.row.tname !== 'Task']]">
            <oj-input-text style="border:1px solid lightgrey" value="{{ $variables.combinationValues[$functions.getColumnName($current)] }}">
            </oj-input-text>
          </oj-bind-if> 
        

        </template>

      </oj-table>
    </div>
  </div>

    <div class="oj-flex" style="margin:10px">
      <div class="oj-flex-item oj-sm-12">
        <oj-table scroll-policy="loadMoreOnScroll" style="width:100%" columns="[[$variables.dynamicCols_timesheet]]"
          data="[[ $variables.dynamicADP_New ]]" horizontal-grid-visible="enabled" columns-default.sortable="disabled">
          <template slot="common" data-oj-as="cell">
            <oj-bind-if test="[[$current.row.time_type!=='total']]">
            <oj-input-number style="border:1px solid lightgrey"
              value="{{ $variables.combinationValues_lines[$functions.getColumnNameNew($current)] }}"
              on-value-changed="[[$listeners.inputNumberValue]]">
            </oj-input-number>
            </oj-bind-if>

            <oj-bind-if test="[[$current.row.time_type==='total']]">
            <oj-input-text readonly="true" :id="[['R_'+ $current.columnIndex]]" class="total" value="{{ $variables.combinationValues_lines['R_'+ $current.columnIndex] }}"></oj-input-text>
            </oj-bind-if>




          </template>
          <template slot="timetype">
            <oj-bind-if test="[[$current.data!=='total']]">
              <oj-select-single value="{{ $variables.combinationValues_lines['timeType' + $current.index] }}"
                data="[[$variables.getCrewRiteTimeTypesListSDP]]" item-text="time_type_name"> </oj-select-single>
            </oj-bind-if>
          </template>
        
          <template slot="total">           
            <oj-input-text readonly="true" class="total" :id="[[$current.index]]" value="{{ $variables.combinationValues_lines[$current.index] }}"></oj-input-text>
          </template>
        </oj-table>
      </div>
    </div>






</oj-sp-welcome-page>