<oj-sp-welcome-page
  id="oj-sp-wp1"
  illustration-background="[[ require.toUrl($page.variables.illustrationBackground) ]]"
  illustration-foreground="[[ require.toUrl($page.variables.illustrationForeground) ]]"
  display-options.responsive-padding="on"
  page-title="Time Entry Design"
  background-color="dark-pebble">

  <div class="oj-flex oj-sm-flex-direction-column">

    <!-- ===================== -->
    <!-- Combination Definitions -->
    <!-- ===================== -->
    <div class="oj-panel oj-sm-margin-4x-bottom">

      <!-- Header -->
<div class="oj-flex oj-sm-align-items-center oj-sm-padding-2x"
     style="background-color:#504f4d;color:#ffffff;">

  <span class="oj-ux-ico-settings oj-sm-margin-2x-end"></span>

  <span style="font-weight:500;">
    Combination Definitions
  </span>

  <!-- FLEX SPACER -->
  <div class="oj-flex-item"></div>

  <!-- Add Column -->
  <oj-button chroming="callToAction"
             on-oj-action="[[$listeners.addColumnButtonAction]]"
             class="oj-button-sm oj-sm-margin-2x-end">
    <span slot="startIcon" class="oj-ux-ico-plus"></span>
    Add Column
  </oj-button>

  <!-- Add Row -->
  <oj-button chroming="callToAction"
             on-oj-action="[[$listeners.buttonAction]]"
             class="oj-button-sm">
    <span slot="startIcon" class="oj-ux-ico-plus"></span>
    Add Row
  </oj-button>

</div>


      <!-- Table -->
<oj-table
  id="combinationTable"
  layout="fixed"
  style="width:100%;table-layout:fixed;"
  data="[[$page.variables.combinationADP]]"
  columns="[[$page.variables.combinationColumns]]"
  edit-mode="rowEdit" 
  on-oj-before-row-edit="[[$listeners.tableBeforeRowEdit]]"
  on-oj-before-row-edit-end="[[$listeners.tableBeforeRowEditEnd]]">

  <!-- Single Dynamic Cell Template for ALL columns -->
  <template slot="cellTemplate" data-oj-as="cell">
    
    <!-- Label Column (Read-only) -->
    <oj-bind-if test="[[ cell.columnKey === 'label' ]]">
      <span style="font-weight:600;">
        <oj-bind-text value="[[ cell.data ]]"></oj-bind-text>
      </span>
    </oj-bind-if>

    <!-- Dynamic Columns (A, B, C, D...) - Editable -->
    <oj-bind-if test="[[ cell.columnKey !== 'label' && cell.columnKey !== 'total' ]]">
      <oj-bind-if test="[[ cell.mode === 'navigation' ]]">
        <oj-bind-text value="[[ cell.data ]]"></oj-bind-text>
      </oj-bind-if>
      
      <oj-bind-if test="[[ cell.mode === 'edit' ]]">
        <oj-input-text 
          value="{{ $variables.newCombinationRow[cell.columnKey] }}"
          style="width:100%;">
        </oj-input-text>
      </oj-bind-if>
    </oj-bind-if>

    <!-- Total Column (Read-only) -->
    <oj-bind-if test="[[ cell.columnKey === 'total' ]]">
      <span style="font-weight:600;">
        <oj-bind-text value="[[ cell.data ]]"></oj-bind-text>
      </span>
    </oj-bind-if>

  </template>

</oj-table> 
   </div>

    <!-- ===================== -->
    <!-- Employee Time Entry -->
    <!-- ===================== -->
    <div class="oj-panel">

      <oj-table
        layout="fixed"
  scroll-policy="loadMoreOnScroll"
  style="width:100%;table-layout:fixed;"
data="[[$page.variables.employeeADP]]"
  columns="[[ $page.variables.employeeColumns ]]" edit-mode="rowEdit" selection-mode.row="single" display="grid"
       >
      </oj-table>

    </div>

  </div>
</oj-sp-welcome-page>
